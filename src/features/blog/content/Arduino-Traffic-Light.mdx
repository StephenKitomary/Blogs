---
title: Build Your Own Arduino Traffic Light System
description: Learn how to create a fully functional traffic light system using Arduino. This step-by-step guide covers hardware setup, circuit diagrams, code explanation, and potential extensions for your project.
image: /images/trafic.png
createdAt: 2025-03-25
updatedAt: 2025-04-05
---

# Building a Smart Traffic Light System with Arduino

Ever wanted to control traffic from your desk? Maybe not, but building a miniature traffic light system is not only a fun Arduino project but also a perfect introduction to programming state machines and working with LEDs and timers.

In this tutorial, we'll create a realistic traffic light that cycles through red, yellow, and green lights with proper timing intervals. By the end, you'll have a fully functional traffic light model that can be expanded with pedestrian crossings, sensors, or even multiple intersections!

## What You'll Need

- Arduino Uno or Nano
- Breadboard
- 3 LEDs (red, yellow, green)
- 3 resistors (220Ω)
- Jumper wires
- USB cable for Arduino
- Arduino IDE installed on your computer

## The Circuit Diagram

Before we start coding, let's set up our hardware. Here's how to connect everything:

1. Connect the Arduino's GND to the breadboard's ground rail
2. Connect each LED's cathode (shorter leg) to ground
3. Connect each LED's anode (longer leg) to a 220Ω resistor
4. Connect the other end of each resistor to the following Arduino pins:
   - Red LED → Pin 2
   - Yellow LED → Pin 3
   - Green LED → Pin 4

![Traffic Light Circuit Diagram](/images/circuit.png)

## The Basic Traffic Light Code

Now let's write our first traffic light program. This code creates a basic traffic light sequence:

```cpp title="TrafficLight.ino"
// Define pins for each traffic light
const int RED_PIN = 2;
const int YELLOW_PIN = 3;
const int GREEN_PIN = 4;

// Define timing constants (in milliseconds)
const int RED_TIME = 5000;     // Red light stays on for 5 seconds
const int YELLOW_TIME = 2000;  // Yellow light stays on for 2 seconds
const int GREEN_TIME = 5000;   // Green light stays on for 5 seconds

void setup() {
  // Initialize all LED pins as outputs
  pinMode(RED_PIN, OUTPUT);
  pinMode(YELLOW_PIN, OUTPUT);
  pinMode(GREEN_PIN, OUTPUT);
  
  // Initially turn all LEDs off
  digitalWrite(RED_PIN, LOW);
  digitalWrite(YELLOW_PIN, LOW);
  digitalWrite(GREEN_PIN, LOW);
  
  // Start serial communication for debugging
  Serial.begin(9600);
  Serial.println("Traffic Light System Initialized");
}

void loop() {
  // Red light phase
  Serial.println("Red light ON");
  digitalWrite(RED_PIN, HIGH);
  digitalWrite(YELLOW_PIN, LOW);
  digitalWrite(GREEN_PIN, LOW);
  delay(RED_TIME);
  
  // Green light phase
  Serial.println("Green light ON");
  digitalWrite(RED_PIN, LOW);
  digitalWrite(YELLOW_PIN, LOW);
  digitalWrite(GREEN_PIN, HIGH);
  delay(GREEN_TIME);
  
  // Yellow light phase
  Serial.println("Yellow light ON");
  digitalWrite(RED_PIN, LOW);
  digitalWrite(YELLOW_PIN, HIGH);
  digitalWrite(GREEN_PIN, LOW);
  delay(YELLOW_TIME);
}
```

## Uploading the Code

1. Connect your Arduino to your computer via USB
2. Open the Arduino IDE
3. Copy the code above and paste it into a new sketch
4. Select your Arduino board type from Tools → Board
5. Select the correct COM port from Tools → Port
6. Click the upload button (right arrow icon)

Once uploaded, your traffic light should start cycling through the red, green, and yellow phases automatically!

## Understanding the Code

Let's break down what the code does:

### Constants and Setup

First, we define our pin numbers and timing constants:

```cpp title="TrafficLight.ino"
const int RED_PIN = 2;
const int YELLOW_PIN = 3;
const int GREEN_PIN = 4;

const int RED_TIME = 5000;     // 5 seconds
const int YELLOW_TIME = 2000;  // 2 seconds
const int GREEN_TIME = 5000;   // 5 seconds
```

In the `setup()` function, we:
1. Configure all three pins as outputs
2. Turn all LEDs off initially
3. Start serial communication for debugging

### The Main Loop

Our `loop()` function runs continuously and follows this sequence:

1. Turn on the red light for 5 seconds
2. Switch to green light for 5 seconds
3. Switch to yellow light for 2 seconds
4. Repeat from step 1

Each phase turns on just one light while ensuring the others are off. The `delay()` function pauses execution for the specified milliseconds before moving to the next step.

## Adding Pedestrian Crossing Functionality

Let's enhance our traffic light with a pedestrian crossing button. We'll add a push button that, when pressed, will trigger a pedestrian crossing phase.

### Updated Circuit

Add these components to your existing circuit:
- 1 pushbutton
- 1 10kΩ resistor (for pull-down)
- 1 additional LED (white or blue) for pedestrian signal
- 1 additional 220Ω resistor for the pedestrian LED

Connect the pushbutton to pin 7 and the pedestrian LED to pin 5.

### Enhanced Traffic Light Code

```cpp title="TrafficLightWithPedestrian.ino"
// Define pins for each traffic light
const int RED_PIN = 2;
const int YELLOW_PIN = 3;
const int GREEN_PIN = 4;
const int PED_PIN = 5;        // Pedestrian light
const int BUTTON_PIN = 7;     // Pedestrian button

// Define timing constants (in milliseconds)
const int RED_TIME = 5000;     // Red light stays on for 5 seconds
const int YELLOW_TIME = 2000;  // Yellow light stays on for 2 seconds
const int GREEN_TIME = 5000;   // Green light stays on for 5 seconds
const int PED_TIME = 5000;     // Pedestrian crossing time

// State variables
bool pedestrianWaiting = false;
unsigned long previousMillis = 0;
int currentState = 0;  // 0=red, 1=green, 2=yellow

void setup() {
  // Initialize all LED pins as outputs
  pinMode(RED_PIN, OUTPUT);
  pinMode(YELLOW_PIN, OUTPUT);
  pinMode(GREEN_PIN, OUTPUT);
  pinMode(PED_PIN, OUTPUT);
  
  // Initialize button pin as input
  pinMode(BUTTON_PIN, INPUT);
  
  // Initially turn all LEDs off
  digitalWrite(RED_PIN, LOW);
  digitalWrite(YELLOW_PIN, LOW);
  digitalWrite(GREEN_PIN, LOW);
  digitalWrite(PED_PIN, LOW);
  
  // Start serial communication for debugging
  Serial.begin(9600);
  Serial.println("Traffic Light System Initialized");
  
  // Start with red light
  digitalWrite(RED_PIN, HIGH);
  currentState = 0;
  previousMillis = millis();
}

void loop() {
  // Check if pedestrian button is pressed
  if (digitalRead(BUTTON_PIN) == HIGH) {
    pedestrianWaiting = true;
    Serial.println("Pedestrian button pressed!");
  }
  
  // Get current time
  unsigned long currentMillis = millis();
  
  // State machine for traffic light
  switch(currentState) {
    case 0: // RED light state
      // Red light is already on
      // Check if it's time to change to green
      if (currentMillis - previousMillis >= RED_TIME) {
        if (pedestrianWaiting) {
          activatePedestrianCrossing();
          pedestrianWaiting = false;
        }
        
        // Change to green
        digitalWrite(RED_PIN, LOW);
        digitalWrite(GREEN_PIN, HIGH);
        currentState = 1;
        previousMillis = millis();
        Serial.println("Green light ON");
      }
      break;
      
    case 1: // GREEN light state
      // Check if it's time to change to yellow
      if (currentMillis - previousMillis >= GREEN_TIME || pedestrianWaiting) {
        digitalWrite(GREEN_PIN, LOW);
        digitalWrite(YELLOW_PIN, HIGH);
        currentState = 2;
        previousMillis = millis();
        Serial.println("Yellow light ON");
      }
      break;
      
    case 2: // YELLOW light state
      // Check if it's time to change to red
      if (currentMillis - previousMillis >= YELLOW_TIME) {
        digitalWrite(YELLOW_PIN, LOW);
        digitalWrite(RED_PIN, HIGH);
        currentState = 0;
        previousMillis = millis();
        Serial.println("Red light ON");
      }
      break;
  }
}

void activatePedestrianCrossing() {
  Serial.println("Pedestrian crossing activated!");
  digitalWrite(PED_PIN, HIGH);  // Turn on pedestrian crossing light
  delay(PED_TIME);              // Wait for pedestrian crossing time
  digitalWrite(PED_PIN, LOW);   // Turn off pedestrian crossing light
  Serial.println("Pedestrian crossing complete");
}
```

## Key Improvements in the Advanced Version

The enhanced version introduces several important concepts:

1. **State Machine Design**: Instead of using sequential `delay()` calls, we use a state machine approach with `millis()` for timing. This is a more robust method that doesn't block the program execution.

2. **Event-Driven Programming**: The pedestrian button acts as an event that can interrupt the normal flow, similar to how real traffic systems respond to inputs.

3. **Non-Blocking Code**: By avoiding `delay()` in the main loop, our program can continuously check for button presses while still maintaining timing for the lights.

## Taking Your Project Further

Here are some ideas to expand your traffic light project:

### Add Sound Feedback
Connect a piezo buzzer to provide audible feedback during pedestrian crossing.

```cpp
// Add at the top of your code
const int BUZZER_PIN = 6;

// Add in setup()
pinMode(BUZZER_PIN, OUTPUT);

// Update pedestrian crossing function
void activatePedestrianCrossing() {
  Serial.println("Pedestrian crossing activated!");
  digitalWrite(PED_PIN, HIGH);
  
  // Beep sound for crossing
  for (int i = 0; i < 10; i++) {
    tone(BUZZER_PIN, 1000, 200);
    delay(500);
  }
  
  digitalWrite(PED_PIN, LOW);
  Serial.println("Pedestrian crossing complete");
}
```

### Add Light Sensor
Make your traffic light respond to ambient light conditions:

```cpp
// Add at the top of your code
const int LIGHT_SENSOR_PIN = A0;
const int NIGHT_THRESHOLD = 300;

// Add in setup()
pinMode(LIGHT_SENSOR_PIN, INPUT);

// Add in loop() to check light level
int lightLevel = analogRead(LIGHT_SENSOR_PIN);
bool isNightTime = (lightLevel < NIGHT_THRESHOLD);

// Adjust timing based on day/night
if (isNightTime) {
  // Use shorter timings at night
  // ...
}
```

## Troubleshooting Tips

Having issues with your traffic light? Here are some common problems and solutions:

1. **LEDs Don't Light Up**: Check your wiring and ensure the LEDs are connected in the correct orientation (longer lead to the resistor, shorter lead to ground).

2. **Inconsistent Behavior**: Make sure your resistors are the correct value (220Ω). Too high resistance will make LEDs dim, too low could damage them.

3. **Button Not Working**: Check your button wiring and ensure you've connected the pull-down resistor correctly.

4. **Arduino Not Uploading**: Verify you've selected the correct board and port in the Arduino IDE.

## Conclusion

Congratulations! You've successfully built a traffic light system with Arduino. This project demonstrates fundamental concepts like digital outputs, timing, state machines, and handling user inputs – all skills that transfer to more complex Arduino projects.

The traffic light is a perfect starting point for IoT projects, home automation systems, or educational demonstrations of programming concepts. Try implementing some of the suggested enhancements, or create your own unique additions to make this project truly yours.

Happy tinkering!

## Resources

- [Official Arduino Documentation](https://www.arduino.cc/reference/en/)
- [More Advanced State Machine Examples](https://www.arduino.cc/en/Tutorial/StateChangeDetection)
- [Traffic Light Physics and Timing Standards](https://ops.fhwa.dot.gov/publications/fhwahop08024/chapter5.htm)